diff -up redhat-rpm-config-9.1.0/macros.jx redhat-rpm-config-9.1.0/macros
--- redhat-rpm-config-9.1.0/macros.jx	2011-08-01 11:01:08.000000000 -0400
+++ redhat-rpm-config-9.1.0/macros	2011-08-01 11:14:53.438448217 -0400
@@ -184,8 +184,12 @@ unset DISPLAY\
 %__find_provides        /usr/lib/rpm/redhat/find-provides
 %__find_requires        /usr/lib/rpm/redhat/find-requires
 
-%__global_cflags	-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4
-%__global_ldflags	-Wl,-z,relro
+#_hardened_build	0
+%_hardened_cflags	%{?_hardened_build:-fPIE}
+%_hardened_ldflags	%{?_hardened_build:-Wl,-z,now -pie}
+
+%__global_cflags	-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 %{?_hardened_cflags}
+%__global_ldflags	-Wl,-z,relro %{?_hardened_ldflags}
 
 # Use these macros to differentiate between RH and other KMP implementation(s).
 redhat_kernel_module_package	1
